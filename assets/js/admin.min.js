jQuery(function(t){var p={popup_reveal:"",$options:t("#ndfw_options"),init:function(){this.$options.find("#ndfw_newsletter_service").on("change",this.change_newsletter_service),this.$options.find("#ndfw_drip_connect").on("click",this.connect_newsletter),this.$options.find("#ndfw_klaviyo_connect").on("click",this.connect_newsletter),this.$options.find("#ndfw_mailchimp_connect").on("click",this.connect_newsletter),t(document.body).bind("init_select2",this.init_select2),jQuery(window).load(function(){t(document.body).trigger("init_select2")})},init_select2:function(){t(".ndfw_select2").each(function(){var n=t(this).attr("placeholder");t(this).select2({placeholder:n})})},connect_newsletter:function(n){n.preventDefault();var d="",i="";if(t(this).hasClass("ndfw_drip_connect")?(d="drip",i=p.$options.find("#ndfw_drip_api").val()):t(this).hasClass("ndfw_klaviyo_connect")?(d="klaviyo",i=p.$options.find("#ndfw_klaviyo_api").val()):t(this).hasClass("ndfw_mailchimp_connect")&&(d="mailchimp",i=p.$options.find("#ndfw_mailchimp_api").val()),""==d)return!1;var o={action:"ndfw_newsletter_lists",service:d,api:i,security:ndfw_newsletter_lists.newsletter_lists_nonce};p.$options.find("#ndfw_newsletter_form");return t.post(ndfw_newsletter_lists.ajax_url,o,function(n){p.$options.find("#ndfw_"+d+'_list option[value!=""]').remove();var i=JSON.parse(n);if("success"==i.status)for(var o=i.data,t=0;t<o.length;t++){var s=o[t];p.$options.find("#ndfw_"+d+"_list").parents(".ndfw-options-row").show(),p.$options.find("#ndfw_"+d+"_list").append('<option value="'+s.id+'">'+s.name+"</option>")}else alert(i.error_message),p.$options.find("#ndfw_"+d+"_list").parents(".ndfw-options-row").hide()}),!1},change_newsletter_service:function(n){var i=t(this).val();"drip"==i?(p.$options.find("#ndfw_drip_api").parents(".ndfw-options-row").show(),""==p.$options.find("#ndfw_drip_api").val()?p.$options.find("#ndfw_drip_list").parents(".ndfw-options-row").hide():p.$options.find("#ndfw_drip_list").parents(".ndfw-options-row").show(),p.$options.find("#ndfw_klaviyo_api").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_klaviyo_list").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_mailchimp_api").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_mailchimp_list").parents(".ndfw-options-row").hide()):"klaviyo"==i?(p.$options.find("#ndfw_drip_api").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_drip_list").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_mailchimp_api").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_mailchimp_list").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_klaviyo_api").parents(".ndfw-options-row").show(),""==p.$options.find("#ndfw_klaviyo_api").val()?p.$options.find("#ndfw_klaviyo_list").parents(".ndfw-options-row").hide():p.$options.find("#ndfw_klaviyo_list").parents(".ndfw-options-row").show()):"mailchimp"==i?(p.$options.find("#ndfw_drip_api").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_drip_list").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_klaviyo_api").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_klaviyo_list").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_mailchimp_api").parents(".ndfw-options-row").show(),""==p.$options.find("#ndfw_mailchimp_api").val()?p.$options.find("#ndfw_mailchimp_list").parents(".ndfw-options-row").hide():p.$options.find("#ndfw_mailchimp_list").parents(".ndfw-options-row").show()):(p.$options.find("#ndfw_drip_api").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_klaviyo_api").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_klaviyo_list").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_mailchimp_api").parents(".ndfw-options-row").hide(),p.$options.find("#ndfw_mailchimp_list").parents(".ndfw-options-row").hide())}};p.init()});